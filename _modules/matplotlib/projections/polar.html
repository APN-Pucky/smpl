

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>matplotlib.projections.polar &mdash; smpl  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/thebelab-helper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> smpl
          

          
          </a>

          
            
            
              <div class="version">
                1.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Links:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/APN-Pucky/smpl">GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../example/index.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/smpl.html">smpl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Profiling:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../performance/index.html">Graph Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance/line.html">Line Profiling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://smpl.readthedocs.io/en/stable/">RTD</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apn-pucky.github.io/smpl/">Stable</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apn-pucky.github.io/smpl/test/">Dev</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">smpl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../matplotlib.html">matplotlib</a> &raquo;</li>
        
      <li>matplotlib.projections.polar</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for matplotlib.projections.polar</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">types</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">_api</span><span class="p">,</span> <span class="n">cbook</span>
<span class="kn">from</span> <span class="nn">matplotlib.axes</span> <span class="kn">import</span> <span class="n">Axes</span>
<span class="kn">import</span> <span class="nn">matplotlib.axis</span> <span class="k">as</span> <span class="nn">maxis</span>
<span class="kn">import</span> <span class="nn">matplotlib.markers</span> <span class="k">as</span> <span class="nn">mmarkers</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">from</span> <span class="nn">matplotlib.path</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="k">as</span> <span class="nn">mtransforms</span>
<span class="kn">from</span> <span class="nn">matplotlib.spines</span> <span class="kn">import</span> <span class="n">Spine</span>


<span class="k">class</span> <span class="nc">PolarTransform</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Transform</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The base polar transform.</span>

<span class="sd">    This transform maps polar coordinates ``(theta, r)`` into Cartesian</span>
<span class="sd">    coordinates ``(x, y) = (r * cos(theta), r * sin(theta))`` (but does not</span>
<span class="sd">    handle positioning in screen space).</span>

<span class="sd">    Path segments at a fixed radius are automatically transformed to circular</span>
<span class="sd">    arcs as long as ``path._interpolation_steps &gt; 1``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">input_dims</span> <span class="o">=</span> <span class="n">output_dims</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_rmin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">_apply_theta_transforms</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="o">=</span> <span class="n">axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_rmin</span> <span class="o">=</span> <span class="n">use_rmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_theta_transforms</span> <span class="o">=</span> <span class="n">_apply_theta_transforms</span>

    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">_make_str_method</span><span class="p">(</span>
        <span class="s2">&quot;_axis&quot;</span><span class="p">,</span>
        <span class="n">use_rmin</span><span class="o">=</span><span class="s2">&quot;_use_rmin&quot;</span><span class="p">,</span>
        <span class="n">_apply_theta_transforms</span><span class="o">=</span><span class="s2">&quot;_apply_theta_transforms&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">transform_non_affine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tr</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="n">t</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
        <span class="c1"># PolarAxes does not use the theta transforms here, but apply them for</span>
        <span class="c1"># backwards-compatibility if not being used by it.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_theta_transforms</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span>
            <span class="n">t</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_theta_offset</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_rmin</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_rorigin</span><span class="p">())</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_rsign</span><span class="p">()</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">r</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([</span><span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">),</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">transform_path_non_affine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">or</span> <span class="n">path</span><span class="o">.</span><span class="n">_interpolation_steps</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform_non_affine</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">vertices</span><span class="p">),</span> <span class="n">path</span><span class="o">.</span><span class="n">codes</span><span class="p">)</span>
        <span class="n">xys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">codes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">last_t</span> <span class="o">=</span> <span class="n">last_r</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">trs</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">iter_segments</span><span class="p">():</span>
            <span class="n">trs</span> <span class="o">=</span> <span class="n">trs</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="n">Path</span><span class="o">.</span><span class="n">LINETO</span><span class="p">:</span>
                <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">r</span><span class="p">),</span> <span class="o">=</span> <span class="n">trs</span>
                <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="n">last_t</span><span class="p">:</span>  <span class="c1"># Same angle: draw a straight line.</span>
                    <span class="n">xys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform_non_affine</span><span class="p">(</span><span class="n">trs</span><span class="p">))</span>
                    <span class="n">codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">LINETO</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">r</span> <span class="o">==</span> <span class="n">last_r</span><span class="p">:</span>  <span class="c1"># Same radius: draw an arc.</span>
                    <span class="c1"># The following is complicated by Path.arc() being</span>
                    <span class="c1"># &quot;helpful&quot; and unwrapping the angles, but we don&#39;t want</span>
                    <span class="c1"># that behavior here.</span>
                    <span class="n">last_td</span><span class="p">,</span> <span class="n">td</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">([</span><span class="n">last_t</span><span class="p">,</span> <span class="n">t</span><span class="p">])</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_rmin</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="p">((</span><span class="n">r</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_rorigin</span><span class="p">())</span>
                             <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_rsign</span><span class="p">())</span>
                    <span class="k">if</span> <span class="n">last_td</span> <span class="o">&lt;=</span> <span class="n">td</span><span class="p">:</span>
                        <span class="k">while</span> <span class="n">td</span> <span class="o">-</span> <span class="n">last_td</span> <span class="o">&gt;</span> <span class="mi">360</span><span class="p">:</span>
                            <span class="n">arc</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">last_td</span><span class="p">,</span> <span class="n">last_td</span> <span class="o">+</span> <span class="mi">360</span><span class="p">)</span>
                            <span class="n">xys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">*</span> <span class="n">r</span><span class="p">)</span>
                            <span class="n">codes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                            <span class="n">last_td</span> <span class="o">+=</span> <span class="mi">360</span>
                        <span class="n">arc</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">last_td</span><span class="p">,</span> <span class="n">td</span><span class="p">)</span>
                        <span class="n">xys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">*</span> <span class="n">r</span><span class="p">)</span>
                        <span class="n">codes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># The reverse version also relies on the fact that all</span>
                        <span class="c1"># codes but the first one are the same.</span>
                        <span class="k">while</span> <span class="n">last_td</span> <span class="o">-</span> <span class="n">td</span> <span class="o">&gt;</span> <span class="mi">360</span><span class="p">:</span>
                            <span class="n">arc</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">last_td</span> <span class="o">-</span> <span class="mi">360</span><span class="p">,</span> <span class="n">last_td</span><span class="p">)</span>
                            <span class="n">xys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">vertices</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span> <span class="o">*</span> <span class="n">r</span><span class="p">)</span>
                            <span class="n">codes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                            <span class="n">last_td</span> <span class="o">-=</span> <span class="mi">360</span>
                        <span class="n">arc</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="n">td</span><span class="p">,</span> <span class="n">last_td</span><span class="p">)</span>
                        <span class="n">xys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">vertices</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span> <span class="o">*</span> <span class="n">r</span><span class="p">)</span>
                        <span class="n">codes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">codes</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># Interpolate.</span>
                    <span class="n">trs</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">simple_linear_interpolation</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">row_stack</span><span class="p">([(</span><span class="n">last_t</span><span class="p">,</span> <span class="n">last_r</span><span class="p">),</span> <span class="n">trs</span><span class="p">]),</span>
                        <span class="n">path</span><span class="o">.</span><span class="n">_interpolation_steps</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="n">xys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform_non_affine</span><span class="p">(</span><span class="n">trs</span><span class="p">))</span>
                    <span class="n">codes</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">Path</span><span class="o">.</span><span class="n">LINETO</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">trs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># Not a straight line.</span>
                <span class="n">xys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transform_non_affine</span><span class="p">(</span><span class="n">trs</span><span class="p">))</span>
                <span class="n">codes</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">c</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">trs</span><span class="p">))</span>
            <span class="n">last_t</span><span class="p">,</span> <span class="n">last_r</span> <span class="o">=</span> <span class="n">trs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">xys</span><span class="p">,</span> <span class="n">codes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">inverted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">return</span> <span class="n">PolarAxes</span><span class="o">.</span><span class="n">InvertedPolarTransform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_rmin</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">_apply_theta_transforms</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">PolarAffine</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2DBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The affine part of the polar projection.  Scales the output so</span>
<span class="sd">    that maximum radius rests on the edge of the axes circle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale_transform</span><span class="p">,</span> <span class="n">limits</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        *limits* is the view limit of the data.  The only part of</span>
<span class="sd">        its bounds that is used is the y limits (for the radius limits).</span>
<span class="sd">        The theta range is handled by the non-affine transform.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_transform</span> <span class="o">=</span> <span class="n">scale_transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span> <span class="o">=</span> <span class="n">limits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_children</span><span class="p">(</span><span class="n">scale_transform</span><span class="p">,</span> <span class="n">limits</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mtx</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">_make_str_method</span><span class="p">(</span><span class="s2">&quot;_scale_transform&quot;</span><span class="p">,</span> <span class="s2">&quot;_limits&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid</span><span class="p">:</span>
            <span class="n">limits_scaled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_limits</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scale_transform</span><span class="p">)</span>
            <span class="n">yscale</span> <span class="o">=</span> <span class="n">limits_scaled</span><span class="o">.</span><span class="n">ymax</span> <span class="o">-</span> <span class="n">limits_scaled</span><span class="o">.</span><span class="n">ymin</span>
            <span class="n">affine</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span> \
                <span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">/</span> <span class="n">yscale</span><span class="p">)</span> \
                <span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mtx</span> <span class="o">=</span> <span class="n">affine</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_inverted</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_invalid</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mtx</span>


<span class="k">class</span> <span class="nc">InvertedPolarTransform</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Transform</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The inverse of the polar transform, mapping Cartesian</span>
<span class="sd">    coordinate space *x* and *y* back to *theta* and *r*.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">input_dims</span> <span class="o">=</span> <span class="n">output_dims</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_rmin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">_apply_theta_transforms</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="o">=</span> <span class="n">axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_use_rmin</span> <span class="o">=</span> <span class="n">use_rmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_theta_transforms</span> <span class="o">=</span> <span class="n">_apply_theta_transforms</span>

    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">_make_str_method</span><span class="p">(</span>
        <span class="s2">&quot;_axis&quot;</span><span class="p">,</span>
        <span class="n">use_rmin</span><span class="o">=</span><span class="s2">&quot;_use_rmin&quot;</span><span class="p">,</span>
        <span class="n">_apply_theta_transforms</span><span class="o">=</span><span class="s2">&quot;_apply_theta_transforms&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">transform_non_affine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">xy</span><span class="o">.</span><span class="n">T</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="c1"># PolarAxes does not use the theta transforms here, but apply them for</span>
        <span class="c1"># backwards-compatibility if not being used by it.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_theta_transforms</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_theta_offset</span><span class="p">()</span>
            <span class="n">theta</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span>
            <span class="n">theta</span> <span class="o">%=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_rmin</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_rorigin</span><span class="p">()</span>
            <span class="n">r</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_rsign</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([</span><span class="n">theta</span><span class="p">,</span> <span class="n">r</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">inverted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">return</span> <span class="n">PolarAxes</span><span class="o">.</span><span class="n">PolarTransform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_use_rmin</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_theta_transforms</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ThetaFormatter</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">Formatter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to format the *theta* tick labels.  Converts the native</span>
<span class="sd">    unit of radians into degrees and adds a degree symbol.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_view_interval</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">))</span>
        <span class="n">digits</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.5</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Use Unicode rather than mathtext with \circ, so that it will work</span>
        <span class="c1"># correctly with any arbitrary font (assuming it has a degree sign),</span>
        <span class="c1"># whereas $5\circ$ will only work correctly with one of the supported</span>
        <span class="c1"># math fonts (Computer Modern and STIX).</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&quot;{value:0.</span><span class="si">{digits:d}</span><span class="s2">f}</span><span class="se">\N{DEGREE SIGN}</span><span class="s2">&quot;</span>
                <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">digits</span><span class="o">=</span><span class="n">digits</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">_AxisWrapper</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span> <span class="o">=</span> <span class="n">axis</span>

    <span class="k">def</span> <span class="nf">get_view_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_view_interval</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">set_view_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">set_view_interval</span><span class="p">(</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">((</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">get_minpos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_minpos</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_data_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_data_interval</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">set_data_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">set_data_interval</span><span class="p">(</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">((</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">get_tick_space</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axis</span><span class="o">.</span><span class="n">get_tick_space</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">ThetaLocator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">Locator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to locate theta ticks.</span>

<span class="sd">    This will work the same as the base locator except in the case that the</span>
<span class="sd">    view spans the entire circle. In such cases, the previously used default</span>
<span class="sd">    locations of every 45 degrees are returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="n">_AxisWrapper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">axis</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="n">_AxisWrapper</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span><span class="o">.</span><span class="n">get_view_interval</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_is_full_circle_deg</span><span class="p">(</span><span class="n">lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">8</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">view_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">((</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">view_limits</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">ThetaTick</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">XTick</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A theta-axis tick.</span>

<span class="sd">    This subclass of `.XTick` provides angular ticks with some small</span>
<span class="sd">    modification to their re-positioning such that ticks are rotated based on</span>
<span class="sd">    tick location. This results in ticks that are correctly perpendicular to</span>
<span class="sd">    the arc spine.</span>

<span class="sd">    When &#39;auto&#39; rotation is enabled, labels are also rotated to be parallel to</span>
<span class="sd">    the spine. The label padding is also applied here since it&#39;s not possible</span>
<span class="sd">    to use a generic axes transform to produce tick-specific padding.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text1_translate</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text2_translate</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">rotation_mode</span><span class="o">=</span><span class="s1">&#39;anchor&#39;</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text1_translate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
            <span class="n">rotation_mode</span><span class="o">=</span><span class="s1">&#39;anchor&#39;</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text2_translate</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_apply_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_apply_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Ensure transform is correct; sometimes this gets reset.</span>
        <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">trans</span><span class="o">.</span><span class="n">contains_branch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_text1_translate</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">trans</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text1_translate</span><span class="p">)</span>
        <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">get_transform</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">trans</span><span class="o">.</span><span class="n">contains_branch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_text2_translate</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">trans</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text2_translate</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_padding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="n">padx</span> <span class="o">=</span> <span class="n">pad</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">/</span> <span class="mi">72</span>
        <span class="n">pady</span> <span class="o">=</span> <span class="n">pad</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">/</span> <span class="mi">72</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text1_translate</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="p">(</span><span class="n">padx</span><span class="p">,</span> <span class="n">pady</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text1_translate</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text2_translate</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">padx</span><span class="p">,</span> <span class="o">-</span><span class="n">pady</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text2_translate</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update_position</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">loc</span> <span class="o">*</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span> <span class="o">+</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_theta_offset</span><span class="p">()</span>
        <span class="n">text_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">-</span> <span class="mi">90</span>
        <span class="n">angle</span> <span class="o">-=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="n">marker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick1line</span><span class="o">.</span><span class="n">get_marker</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">marker</span> <span class="ow">in</span> <span class="p">(</span><span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKUP</span><span class="p">,</span> <span class="s1">&#39;|&#39;</span><span class="p">):</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">marker</span> <span class="o">==</span> <span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKDOWN</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Don&#39;t modify custom tick line markers.</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick1line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tick1line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span> <span class="o">=</span> <span class="n">trans</span>

        <span class="n">marker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick2line</span><span class="o">.</span><span class="n">get_marker</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">marker</span> <span class="ow">in</span> <span class="p">(</span><span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKUP</span><span class="p">,</span> <span class="s1">&#39;|&#39;</span><span class="p">):</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">marker</span> <span class="o">==</span> <span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKDOWN</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Don&#39;t modify custom tick line markers.</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick2line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tick2line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span> <span class="o">=</span> <span class="n">trans</span>

        <span class="n">mode</span><span class="p">,</span> <span class="n">user_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labelrotation</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span>
            <span class="n">text_angle</span> <span class="o">=</span> <span class="n">user_angle</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">text_angle</span> <span class="o">&gt;</span> <span class="mi">90</span><span class="p">:</span>
                <span class="n">text_angle</span> <span class="o">-=</span> <span class="mi">180</span>
            <span class="k">elif</span> <span class="n">text_angle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">90</span><span class="p">:</span>
                <span class="n">text_angle</span> <span class="o">+=</span> <span class="mi">180</span>
            <span class="n">text_angle</span> <span class="o">+=</span> <span class="n">user_angle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">text_angle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">text_angle</span><span class="p">)</span>

        <span class="c1"># This extra padding helps preserve the look from previous releases but</span>
        <span class="c1"># is also needed because labels are anchored to their center.</span>
        <span class="n">pad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pad</span> <span class="o">+</span> <span class="mi">7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_padding</span><span class="p">(</span><span class="n">pad</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">_loc</span> <span class="o">*</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span> <span class="o">+</span>
                             <span class="n">axes</span><span class="o">.</span><span class="n">get_theta_offset</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">ThetaAxis</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">XAxis</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A theta Axis.</span>

<span class="sd">    This overrides certain properties of an `.XAxis` to provide special-casing</span>
<span class="sd">    for an angular axis.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__name__</span> <span class="o">=</span> <span class="s1">&#39;thetaaxis&#39;</span>
    <span class="n">axis_name</span> <span class="o">=</span> <span class="s1">&#39;theta&#39;</span>  <span class="c1">#: Read-only name identifying the axis.</span>
    <span class="n">_tick_class</span> <span class="o">=</span> <span class="n">ThetaTick</span>

    <span class="k">def</span> <span class="nf">_wrap_locator_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">ThetaLocator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">ThetaFormatter</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isDefault_majloc</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isDefault_majfmt</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_locator_formatter</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="s1">&#39;linear&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                <span class="s2">&quot;The xscale cannot be set on a polar plot&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># LinearScale.set_default_locators_and_formatters just set the major</span>
        <span class="c1"># locator to be an AutoLocator, so we customize it here to have ticks</span>
        <span class="c1"># at sensible degree multiples.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">()</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_locator_formatter</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_copy_tick_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copy the props from src tick to dest tick.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">src</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">dest</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_copy_tick_props</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span>

        <span class="c1"># Ensure that tick transforms are independent so that padding works.</span>
        <span class="n">trans</span> <span class="o">=</span> <span class="n">dest</span><span class="o">.</span><span class="n">_get_text1_transform</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">dest</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">trans</span> <span class="o">+</span> <span class="n">dest</span><span class="o">.</span><span class="n">_text1_translate</span><span class="p">)</span>
        <span class="n">trans</span> <span class="o">=</span> <span class="n">dest</span><span class="o">.</span><span class="n">_get_text2_transform</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">dest</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">trans</span> <span class="o">+</span> <span class="n">dest</span><span class="o">.</span><span class="n">_text2_translate</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">RadialLocator</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">Locator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to locate radius ticks.</span>

<span class="sd">    Ensures that all ticks are strictly positive.  For all other tasks, it</span>
<span class="sd">    delegates to the base `.Locator` (which may be different depending on the</span>
<span class="sd">    scale of the *r*-axis).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">base</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span> <span class="o">=</span> <span class="n">axes</span>

    <span class="k">def</span> <span class="nf">set_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">set_axis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Ensure previous behaviour with full circle non-annular views.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_is_full_circle_rad</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">):</span>
                <span class="n">rorigin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">get_rorigin</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">get_rsign</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">get_rmin</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">rorigin</span><span class="p">:</span>
                    <span class="k">return</span> <span class="p">[</span><span class="n">tick</span> <span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="p">()</span> <span class="k">if</span> <span class="n">tick</span> <span class="o">&gt;</span> <span class="n">rorigin</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">nonsingular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">return</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>  <span class="c1"># Init. limits.</span>
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">view_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">view_limits</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vmax</span> <span class="o">&gt;</span> <span class="n">vmin</span><span class="p">:</span>
            <span class="c1"># this allows inverted r/y-lims</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmin</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">nonsingular</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_ThetaShift</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">ScaledTranslation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply a padding shift based on axes theta limits.</span>

<span class="sd">    This is used to create padding for radial ticks.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    axes : `~matplotlib.axes.Axes`</span>
<span class="sd">        The owning axes; used to determine limits.</span>
<span class="sd">    pad : float</span>
<span class="sd">        The padding to apply, in points.</span>
<span class="sd">    mode : {&#39;min&#39;, &#39;max&#39;, &#39;rlabel&#39;}</span>
<span class="sd">        Whether to shift away from the start (``&#39;min&#39;``) or the end (``&#39;max&#39;``)</span>
<span class="sd">        of the axes, or using the rlabel position (``&#39;rlabel&#39;``).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pad</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_children</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">_realViewLim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pad</span> <span class="o">=</span> <span class="n">pad</span>

    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">_make_str_method</span><span class="p">(</span><span class="s2">&quot;axes&quot;</span><span class="p">,</span> <span class="s2">&quot;pad&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;rlabel&#39;</span><span class="p">:</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_rlabel_position</span><span class="p">())</span> <span class="o">*</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span> <span class="o">+</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_theta_offset</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">_realViewLim</span><span class="o">.</span><span class="n">xmin</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span>
                    <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">_realViewLim</span><span class="o">.</span><span class="n">xmax</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;rlabel&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">):</span>
                <span class="n">padx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">pady</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">padx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">pady</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pad</span> <span class="o">*</span> <span class="n">padx</span> <span class="o">/</span> <span class="mi">72</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pad</span> <span class="o">*</span> <span class="n">pady</span> <span class="o">/</span> <span class="mi">72</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">RadialTick</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">YTick</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A radial-axis tick.</span>

<span class="sd">    This subclass of `.YTick` provides radial ticks with some small</span>
<span class="sd">    modification to their re-positioning such that ticks are rotated based on</span>
<span class="sd">    axes limits.  This results in ticks that are correctly perpendicular to</span>
<span class="sd">    the spine. Labels are also rotated to be perpendicular to the spine, when</span>
<span class="sd">    &#39;auto&#39; rotation is enabled.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_rotation_mode</span><span class="p">(</span><span class="s1">&#39;anchor&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_rotation_mode</span><span class="p">(</span><span class="s1">&#39;anchor&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_determine_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
        <span class="c1"># Note: angle is the (spine angle - 90) because it&#39;s used for the tick</span>
        <span class="c1"># &amp; text setup, so all numbers below are -90 from (normed) spine angle.</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">start</span><span class="p">:</span>
                <span class="k">if</span> <span class="o">-</span><span class="mi">90</span> <span class="o">&lt;=</span> <span class="n">angle</span> <span class="o">&lt;=</span> <span class="mi">90</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="o">-</span><span class="mi">90</span> <span class="o">&lt;=</span> <span class="n">angle</span> <span class="o">&lt;=</span> <span class="mi">90</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">start</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">68.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">23.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">22.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">67.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">112.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">157.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">202.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">247.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">68.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">23.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">22.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">67.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">112.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">157.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">202.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span>
                <span class="k">elif</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mf">247.5</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span>

    <span class="k">def</span> <span class="nf">update_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update_position</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span>
        <span class="n">thetamin</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_thetamin</span><span class="p">()</span>
        <span class="n">thetamax</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_thetamax</span><span class="p">()</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span>
        <span class="n">offset_rad</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_theta_offset</span><span class="p">()</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">offset_rad</span><span class="p">)</span>
        <span class="n">full</span> <span class="o">=</span> <span class="n">_is_full_circle_deg</span><span class="p">(</span><span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">full</span><span class="p">:</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">get_rlabel_position</span><span class="p">()</span> <span class="o">*</span> <span class="n">direction</span> <span class="o">+</span>
                     <span class="n">offset</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">-</span> <span class="mi">90</span>
            <span class="n">tick_angle</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="p">(</span><span class="n">thetamin</span> <span class="o">*</span> <span class="n">direction</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">-</span> <span class="mi">90</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tick_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tick_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span> <span class="o">+</span> <span class="mi">180</span><span class="p">)</span>
        <span class="n">text_angle</span> <span class="o">=</span> <span class="p">(</span><span class="n">angle</span> <span class="o">+</span> <span class="mi">90</span><span class="p">)</span> <span class="o">%</span> <span class="mi">180</span> <span class="o">-</span> <span class="mi">90</span>  <span class="c1"># between -90 and +90.</span>
        <span class="n">mode</span><span class="p">,</span> <span class="n">user_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labelrotation</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
            <span class="n">text_angle</span> <span class="o">+=</span> <span class="n">user_angle</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text_angle</span> <span class="o">=</span> <span class="n">user_angle</span>

        <span class="k">if</span> <span class="n">full</span><span class="p">:</span>
            <span class="n">ha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">get_horizontalalignment</span><span class="p">()</span>
            <span class="n">va</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">get_verticalalignment</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ha</span><span class="p">,</span> <span class="n">va</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_determine_anchor</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">direction</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_horizontalalignment</span><span class="p">(</span><span class="n">ha</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_verticalalignment</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">text_angle</span><span class="p">)</span>

        <span class="n">marker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick1line</span><span class="o">.</span><span class="n">get_marker</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">marker</span> <span class="o">==</span> <span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKLEFT</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">tick_angle</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">marker</span> <span class="o">==</span> <span class="s1">&#39;_&#39;</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">tick_angle</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">marker</span> <span class="o">==</span> <span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKRIGHT</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">tick_angle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Don&#39;t modify custom tick line markers.</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick1line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tick1line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span> <span class="o">=</span> <span class="n">trans</span>

        <span class="k">if</span> <span class="n">full</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tick2line</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="p">(</span><span class="n">thetamax</span> <span class="o">*</span> <span class="n">direction</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">-</span> <span class="mi">90</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">tick_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tick_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span> <span class="o">+</span> <span class="mi">180</span><span class="p">)</span>
        <span class="n">text_angle</span> <span class="o">=</span> <span class="p">(</span><span class="n">angle</span> <span class="o">+</span> <span class="mi">90</span><span class="p">)</span> <span class="o">%</span> <span class="mi">180</span> <span class="o">-</span> <span class="mi">90</span>  <span class="c1"># between -90 and +90.</span>
        <span class="n">mode</span><span class="p">,</span> <span class="n">user_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labelrotation</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
            <span class="n">text_angle</span> <span class="o">+=</span> <span class="n">user_angle</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text_angle</span> <span class="o">=</span> <span class="n">user_angle</span>

        <span class="n">ha</span><span class="p">,</span> <span class="n">va</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_determine_anchor</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">direction</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_ha</span><span class="p">(</span><span class="n">ha</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_va</span><span class="p">(</span><span class="n">va</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">text_angle</span><span class="p">)</span>

        <span class="n">marker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick2line</span><span class="o">.</span><span class="n">get_marker</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">marker</span> <span class="o">==</span> <span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKLEFT</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">tick_angle</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">marker</span> <span class="o">==</span> <span class="s1">&#39;_&#39;</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">tick_angle</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">marker</span> <span class="o">==</span> <span class="n">mmarkers</span><span class="o">.</span><span class="n">TICKRIGHT</span><span class="p">:</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">tick_angle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Don&#39;t modify custom tick line markers.</span>
            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tick2line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tick2line</span><span class="o">.</span><span class="n">_marker</span><span class="o">.</span><span class="n">_transform</span> <span class="o">=</span> <span class="n">trans</span>


<span class="k">class</span> <span class="nc">RadialAxis</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">YAxis</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A radial Axis.</span>

<span class="sd">    This overrides certain properties of a `.YAxis` to provide special-casing</span>
<span class="sd">    for a radial axis.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__name__</span> <span class="o">=</span> <span class="s1">&#39;radialaxis&#39;</span>
    <span class="n">axis_name</span> <span class="o">=</span> <span class="s1">&#39;radius&#39;</span>  <span class="c1">#: Read-only name identifying the axis.</span>
    <span class="n">_tick_class</span> <span class="o">=</span> <span class="n">RadialTick</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sticky_edges</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_wrap_locator_formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">RadialLocator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">(),</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isDefault_majloc</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_locator_formatter</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_set_scale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wrap_locator_formatter</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_is_full_circle_deg</span><span class="p">(</span><span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine if a wedge (in degrees) spans the full circle.</span>

<span class="sd">    The condition is derived from :class:`~matplotlib.patches.Wedge`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">thetamax</span> <span class="o">-</span> <span class="n">thetamin</span><span class="p">)</span> <span class="o">-</span> <span class="mf">360.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-12</span>


<span class="k">def</span> <span class="nf">_is_full_circle_rad</span><span class="p">(</span><span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine if a wedge (in radians) spans the full circle.</span>

<span class="sd">    The condition is derived from :class:`~matplotlib.patches.Wedge`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">thetamax</span> <span class="o">-</span> <span class="n">thetamin</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.74e-14</span>


<span class="k">class</span> <span class="nc">_WedgeBbox</span><span class="p">(</span><span class="n">mtransforms</span><span class="o">.</span><span class="n">Bbox</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform (theta, r) wedge Bbox into axes bounding box.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    center : (float, float)</span>
<span class="sd">        Center of the wedge</span>
<span class="sd">    viewLim : `~matplotlib.transforms.Bbox`</span>
<span class="sd">        Bbox determining the boundaries of the wedge</span>
<span class="sd">    originLim : `~matplotlib.transforms.Bbox`</span>
<span class="sd">        Bbox determining the origin for the wedge, if different from *viewLim*</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">viewLim</span><span class="p">,</span> <span class="n">originLim</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_center</span> <span class="o">=</span> <span class="n">center</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span> <span class="o">=</span> <span class="n">viewLim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_originLim</span> <span class="o">=</span> <span class="n">originLim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_children</span><span class="p">(</span><span class="n">viewLim</span><span class="p">,</span> <span class="n">originLim</span><span class="p">)</span>

    <span class="fm">__str__</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">_make_str_method</span><span class="p">(</span><span class="s2">&quot;_center&quot;</span><span class="p">,</span> <span class="s2">&quot;_viewLim&quot;</span><span class="p">,</span> <span class="s2">&quot;_originLim&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invalid</span><span class="p">:</span>
            <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_viewLim</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="c1"># Scale angular limits to work with Wedge.</span>
            <span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">180</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
            <span class="k">if</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
                <span class="n">points</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

            <span class="c1"># Scale radial limits based on origin radius.</span>
            <span class="n">points</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originLim</span><span class="o">.</span><span class="n">y0</span>

            <span class="c1"># Scale radial limits to match axes limits.</span>
            <span class="n">rscale</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">/</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">points</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="n">rscale</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="mf">0.5</span><span class="p">)</span>

            <span class="c1"># Generate bounding box for wedge.</span>
            <span class="n">wedge</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Wedge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_center</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                                   <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                                   <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_from_path</span><span class="p">(</span><span class="n">wedge</span><span class="o">.</span><span class="n">get_path</span><span class="p">())</span>

            <span class="c1"># Ensure equal aspect ratio.</span>
            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">deltah</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">w</span> <span class="o">-</span> <span class="n">h</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">deltaw</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_points</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="n">deltaw</span><span class="p">,</span> <span class="o">-</span><span class="n">deltah</span><span class="p">],</span> <span class="p">[</span><span class="n">deltaw</span><span class="p">,</span> <span class="n">deltah</span><span class="p">]])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_invalid</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_points</span>


<div class="viewcode-block" id="PolarAxes"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes">[docs]</a><span class="k">class</span> <span class="nc">PolarAxes</span><span class="p">(</span><span class="n">Axes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A polar graph projection, where the input dimensions are *theta*, *r*.</span>

<span class="sd">    Theta starts pointing east and goes anti-clockwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;polar&#39;</span>

<div class="viewcode-block" id="PolarAxes.__init__"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span>
                 <span class="n">theta_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta_direction</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">rlabel_position</span><span class="o">=</span><span class="mf">22.5</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_theta_offset</span> <span class="o">=</span> <span class="n">theta_offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_theta_direction</span> <span class="o">=</span> <span class="n">theta_direction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_rlabel_position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">rlabel_position</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_sticky_edges</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span> <span class="n">adjustable</span><span class="o">=</span><span class="s1">&#39;box&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>

<div class="viewcode-block" id="PolarAxes.clear"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="mf">1.05</span><span class="p">)</span>

        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start</span><span class="p">:</span>
            <span class="n">start</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end</span><span class="p">:</span>
            <span class="n">end</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;polaraxes.grid&#39;</span><span class="p">])</span>
        <span class="n">inner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inner</span><span class="p">:</span>
            <span class="n">inner</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_rorigin</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_theta_offset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_theta_offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_theta_direction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_theta_direction</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_init_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This is moved out of __init__ because non-separable axes don&#39;t use it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="o">=</span> <span class="n">ThetaAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="o">=</span> <span class="n">RadialAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># Calling polar_axes.xaxis.clear() or polar_axes.xaxis.clear()</span>
        <span class="c1"># results in weird artifacts. Therefore we disable this for</span>
        <span class="c1"># now.</span>
        <span class="c1"># self.spines[&#39;polar&#39;].register_axis(self.yaxis)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_transScale</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_set_lim_and_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># A view limit where the minimum radius can be locked if the user</span>
        <span class="c1"># specifies an alternate origin.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">LockableBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="p">)</span>

        <span class="c1"># Handle angular offset and direction.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span> \
            <span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_theta_direction</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta_offset</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span> \
            <span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_theta_offset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transShift</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_theta_offset</span>
        <span class="c1"># A view limit shifted to the correct location after accounting for</span>
        <span class="c1"># orientation and offset.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_realViewLim</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformedBbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="p">,</span>
                                                        <span class="bp">self</span><span class="o">.</span><span class="n">transShift</span><span class="p">)</span>

        <span class="c1"># Transforms the x and y axis separately by a scale factor</span>
        <span class="c1"># It is assumed that this part will have non-linear components</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span>

        <span class="c1"># Scale view limit into a bbox around the selected wedge. This may be</span>
        <span class="c1"># smaller than the usual unit axes rectangle if not plotting the full</span>
        <span class="c1"># circle.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axesLim</span> <span class="o">=</span> <span class="n">_WedgeBbox</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_realViewLim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span><span class="p">)</span>

        <span class="c1"># Scale the wedge to fill the axes.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transWedge</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axesLim</span><span class="p">)</span>

        <span class="c1"># Scale the axes to fill the figure.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="c1"># A (possibly non-linear) projection on the (already scaled)</span>
        <span class="c1"># data.  This one is aware of rmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transProjection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PolarTransform</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">_apply_theta_transforms</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1"># Add dependency on rorigin.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transProjection</span><span class="o">.</span><span class="n">set_children</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span><span class="p">)</span>

        <span class="c1"># An affine transformation on the data, generally to limit the</span>
        <span class="c1"># range of the axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transProjectionAffine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PolarAffine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transScale</span><span class="p">,</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span><span class="p">)</span>

        <span class="c1"># The complete data transformation stack -- from data all the</span>
        <span class="c1"># way to display coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transData</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transShift</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transProjection</span> <span class="o">+</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transProjectionAffine</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transWedge</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">))</span>

        <span class="c1"># This is the transform for theta-axis ticks.  It is</span>
        <span class="c1"># equivalent to transData, except it always puts r == 0.0 and r == 1.0</span>
        <span class="c1"># at the edge of the axis circles.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">(),</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="p">))</span> <span class="o">+</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
        <span class="c1"># The theta labels are flipped along the radius, so that text 1 is on</span>
        <span class="c1"># the outside by default. This should work the same as before.</span>
        <span class="n">flipr_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span> \
            <span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span> \
            <span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span> \
            <span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_text_transform</span> <span class="o">=</span> <span class="n">flipr_transform</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span>

        <span class="c1"># This is the transform for r-axis ticks.  It scales the theta</span>
        <span class="c1"># axis so the gridlines from 0.0 to 1.0, now go from thetamin to</span>
        <span class="c1"># thetamax.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">mtransforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">BboxTransformTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="p">),</span>
                <span class="n">mtransforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span> <span class="o">+</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
        <span class="c1"># The r-axis labels are put at an angle and padded in the r-direction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_r_label_position</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span> \
            <span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_rlabel_position</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_text_transform</span> <span class="o">=</span> <span class="n">mtransforms</span><span class="o">.</span><span class="n">TransformWrapper</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_r_label_position</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>

<div class="viewcode-block" id="PolarAxes.get_xaxis_transform"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_xaxis_transform">[docs]</a>    <span class="k">def</span> <span class="nf">get_xaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
        <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">([</span><span class="s1">&#39;tick1&#39;</span><span class="p">,</span> <span class="s1">&#39;tick2&#39;</span><span class="p">,</span> <span class="s1">&#39;grid&#39;</span><span class="p">],</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span></div>

<div class="viewcode-block" id="PolarAxes.get_xaxis_text1_transform"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_xaxis_text1_transform">[docs]</a>    <span class="k">def</span> <span class="nf">get_xaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_text_transform</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span></div>

<div class="viewcode-block" id="PolarAxes.get_xaxis_text2_transform"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_xaxis_text2_transform">[docs]</a>    <span class="k">def</span> <span class="nf">get_xaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_text_transform</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span></div>

<div class="viewcode-block" id="PolarAxes.get_yaxis_transform"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_yaxis_transform">[docs]</a>    <span class="k">def</span> <span class="nf">get_yaxis_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">which</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;tick1&#39;</span><span class="p">,</span> <span class="s1">&#39;tick2&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_text_transform</span>
        <span class="k">elif</span> <span class="n">which</span> <span class="o">==</span> <span class="s1">&#39;grid&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">([</span><span class="s1">&#39;tick1&#39;</span><span class="p">,</span> <span class="s1">&#39;tick2&#39;</span><span class="p">,</span> <span class="s1">&#39;grid&#39;</span><span class="p">],</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.get_yaxis_text1_transform"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_yaxis_text1_transform">[docs]</a>    <span class="k">def</span> <span class="nf">get_yaxis_text1_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">):</span>
        <span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_realViewLim</span><span class="o">.</span><span class="n">intervalx</span>
        <span class="k">if</span> <span class="n">_is_full_circle_rad</span><span class="p">(</span><span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_text_transform</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">halign</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span>
            <span class="n">pad_shift</span> <span class="o">=</span> <span class="n">_ThetaShift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">halign</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span>
            <span class="n">pad_shift</span> <span class="o">=</span> <span class="n">_ThetaShift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_text_transform</span> <span class="o">+</span> <span class="n">pad_shift</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">halign</span></div>

<div class="viewcode-block" id="PolarAxes.get_yaxis_text2_transform"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_yaxis_text2_transform">[docs]</a>    <span class="k">def</span> <span class="nf">get_yaxis_text2_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta_direction</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">halign</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span>
            <span class="n">pad_shift</span> <span class="o">=</span> <span class="n">_ThetaShift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">halign</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span>
            <span class="n">pad_shift</span> <span class="o">=</span> <span class="n">_ThetaShift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pad</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_text_transform</span> <span class="o">+</span> <span class="n">pad_shift</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">halign</span></div>

<div class="viewcode-block" id="PolarAxes.draw"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unstale_viewLim</span><span class="p">()</span>
        <span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_realViewLim</span><span class="o">.</span><span class="n">intervalx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">thetamin</span> <span class="o">&gt;</span> <span class="n">thetamax</span><span class="p">:</span>
            <span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span> <span class="o">=</span> <span class="n">thetamax</span><span class="p">,</span> <span class="n">thetamin</span>
        <span class="n">rmin</span><span class="p">,</span> <span class="n">rmax</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_realViewLim</span><span class="o">.</span><span class="n">intervaly</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rorigin</span><span class="p">())</span> <span class="o">*</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">get_rsign</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">,</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Wedge</span><span class="p">):</span>
            <span class="c1"># Backwards-compatibility: Any subclassed Axes might override the</span>
            <span class="c1"># patch to not be the Wedge that PolarAxes uses.</span>
            <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transWedge</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_theta1</span><span class="p">(</span><span class="n">thetamin</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_theta2</span><span class="p">(</span><span class="n">thetamax</span><span class="p">)</span>

            <span class="n">edge</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transWedge</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">radius</span> <span class="o">=</span> <span class="n">edge</span> <span class="o">-</span> <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">radius</span> <span class="o">*</span> <span class="p">(</span><span class="n">rmax</span> <span class="o">-</span> <span class="n">rmin</span><span class="p">)</span> <span class="o">/</span> <span class="n">rmax</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_radius</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_width</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>

            <span class="n">inner_width</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">-</span> <span class="n">width</span>
            <span class="n">inner</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">inner</span><span class="p">:</span>
                <span class="n">inner</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">inner_width</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="n">visible</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">_is_full_circle_deg</span><span class="p">(</span><span class="n">thetamin</span><span class="p">,</span> <span class="n">thetamax</span><span class="p">)</span>
        <span class="c1"># For backwards compatibility, any subclassed Axes might override the</span>
        <span class="c1"># spines to not include start/end that PolarAxes uses.</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start</span><span class="p">:</span>
            <span class="n">start</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">end</span><span class="p">:</span>
            <span class="n">end</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">visible</span><span class="p">:</span>
            <span class="n">yaxis_text_transform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">yaxis_text_transform</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r_label_position</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_text_transform</span> <span class="o">!=</span> <span class="n">yaxis_text_transform</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_text_transform</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yaxis_text_transform</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">reset_ticks</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_clip_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_gen_axes_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Wedge</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">360.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_spines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">spines</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;polar&#39;</span><span class="p">:</span> <span class="n">Spine</span><span class="o">.</span><span class="n">arc_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">),</span>
            <span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">),</span>
            <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">),</span>
            <span class="s1">&#39;inner&#39;</span><span class="p">:</span> <span class="n">Spine</span><span class="o">.</span><span class="n">arc_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="n">spines</span><span class="p">[</span><span class="s1">&#39;polar&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transWedge</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
        <span class="n">spines</span><span class="p">[</span><span class="s1">&#39;inner&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transWedge</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
        <span class="n">spines</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span><span class="p">)</span>
        <span class="n">spines</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_yaxis_transform</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">spines</span>

<div class="viewcode-block" id="PolarAxes.set_thetamax"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_thetamax">[docs]</a>    <span class="k">def</span> <span class="nf">set_thetamax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thetamax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the maximum theta limit in degrees.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">thetamax</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.get_thetamax"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_thetamax">[docs]</a>    <span class="k">def</span> <span class="nf">get_thetamax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the maximum theta limit in degrees.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">xmax</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.set_thetamin"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_thetamin">[docs]</a>    <span class="k">def</span> <span class="nf">set_thetamin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thetamin</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the minimum theta limit in degrees.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">thetamin</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.get_thetamin"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_thetamin">[docs]</a>    <span class="k">def</span> <span class="nf">get_thetamin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the minimum theta limit in degrees.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">xmin</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.set_thetalim"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_thetalim">[docs]</a>    <span class="k">def</span> <span class="nf">set_thetalim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the minimum and maximum theta values.</span>

<span class="sd">        Can take the following signatures:</span>

<span class="sd">        - ``set_thetalim(minval, maxval)``: Set the limits in radians.</span>
<span class="sd">        - ``set_thetalim(thetamin=minval, thetamax=maxval)``: Set the limits</span>
<span class="sd">          in degrees.</span>

<span class="sd">        where minval and maxval are the minimum and maximum limits. Values are</span>
<span class="sd">        wrapped in to the range :math:`[0, 2\pi]` (in radians), so for example</span>
<span class="sd">        it is possible to do ``set_thetalim(-np.pi / 2, np.pi / 2)`` to have</span>
<span class="sd">        an axis symmetric around 0. A ValueError is raised if the absolute</span>
<span class="sd">        angle difference is larger than a full circle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">orig_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>  <span class="c1"># in radians</span>
        <span class="k">if</span> <span class="s1">&#39;thetamin&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;xmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;thetamin&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;thetamax&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;xmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;thetamax&#39;</span><span class="p">))</span>
        <span class="n">new_min</span><span class="p">,</span> <span class="n">new_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Parsing all permutations of *args, **kwargs is tricky; it is simpler</span>
        <span class="c1"># to let set_xlim() do it and then validate the limits.</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_max</span> <span class="o">-</span> <span class="n">new_min</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">orig_lim</span><span class="p">)</span>  <span class="c1"># un-accept the change</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The angle range must be less than a full circle&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">((</span><span class="n">new_min</span><span class="p">,</span> <span class="n">new_max</span><span class="p">)))</span></div>

<div class="viewcode-block" id="PolarAxes.set_theta_offset"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_theta_offset">[docs]</a>    <span class="k">def</span> <span class="nf">set_theta_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the offset for the location of 0 in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mtx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_theta_offset</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
        <span class="n">mtx</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta_offset</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span></div>

<div class="viewcode-block" id="PolarAxes.get_theta_offset"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_theta_offset">[docs]</a>    <span class="k">def</span> <span class="nf">get_theta_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the offset for the location of 0 in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_theta_offset</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="PolarAxes.set_theta_zero_location"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_theta_zero_location">[docs]</a>    <span class="k">def</span> <span class="nf">set_theta_zero_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the location of theta&#39;s zero.</span>

<span class="sd">        This simply calls `set_theta_offset` with the correct value in radians.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        loc : str</span>
<span class="sd">            May be one of &quot;N&quot;, &quot;NW&quot;, &quot;W&quot;, &quot;SW&quot;, &quot;S&quot;, &quot;SE&quot;, &quot;E&quot;, or &quot;NE&quot;.</span>
<span class="sd">        offset : float, default: 0</span>
<span class="sd">            An offset in degrees to apply from the specified *loc*. **Note:**</span>
<span class="sd">            this offset is *always* applied counter-clockwise regardless of</span>
<span class="sd">            the direction setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;NW&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">,</span>
            <span class="s1">&#39;W&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
            <span class="s1">&#39;SW&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">1.25</span><span class="p">,</span>
            <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">,</span>
            <span class="s1">&#39;SE&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">1.75</span><span class="p">,</span>
            <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;NE&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_theta_offset</span><span class="p">(</span><span class="n">mapping</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">offset</span><span class="p">))</span></div>

<div class="viewcode-block" id="PolarAxes.set_theta_direction"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_theta_direction">[docs]</a>    <span class="k">def</span> <span class="nf">set_theta_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the direction in which theta increases.</span>

<span class="sd">        clockwise, -1:</span>
<span class="sd">           Theta increases in the clockwise direction</span>

<span class="sd">        counterclockwise, anticlockwise, 1:</span>
<span class="sd">           Theta increases in the counterclockwise direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mtx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;clockwise&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">mtx</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;counterclockwise&#39;</span><span class="p">,</span> <span class="s1">&#39;anticlockwise&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">mtx</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_api</span><span class="o">.</span><span class="n">check_in_list</span><span class="p">(</span>
                <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;clockwise&#39;</span><span class="p">,</span> <span class="s1">&#39;counterclockwise&#39;</span><span class="p">,</span> <span class="s1">&#39;anticlockwise&#39;</span><span class="p">],</span>
                <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span><span class="o">.</span><span class="n">invalidate</span><span class="p">()</span></div>

<div class="viewcode-block" id="PolarAxes.get_theta_direction"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_theta_direction">[docs]</a>    <span class="k">def</span> <span class="nf">get_theta_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the direction in which theta increases.</span>

<span class="sd">        -1:</span>
<span class="sd">           Theta increases in the clockwise direction</span>

<span class="sd">        1:</span>
<span class="sd">           Theta increases in the counterclockwise direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="PolarAxes.set_rmax"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_rmax">[docs]</a>    <span class="k">def</span> <span class="nf">set_rmax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rmax</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the outer radial limit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rmax : float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">y1</span> <span class="o">=</span> <span class="n">rmax</span></div>

<div class="viewcode-block" id="PolarAxes.get_rmax"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_rmax">[docs]</a>    <span class="k">def</span> <span class="nf">get_rmax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            Outer radial limit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">ymax</span></div>

<div class="viewcode-block" id="PolarAxes.set_rmin"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_rmin">[docs]</a>    <span class="k">def</span> <span class="nf">set_rmin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rmin</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the inner radial limit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rmin : float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">y0</span> <span class="o">=</span> <span class="n">rmin</span></div>

<div class="viewcode-block" id="PolarAxes.get_rmin"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_rmin">[docs]</a>    <span class="k">def</span> <span class="nf">get_rmin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            The inner radial limit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">ymin</span></div>

<div class="viewcode-block" id="PolarAxes.set_rorigin"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_rorigin">[docs]</a>    <span class="k">def</span> <span class="nf">set_rorigin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rorigin</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the radial origin.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rorigin : float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span><span class="o">.</span><span class="n">locked_y0</span> <span class="o">=</span> <span class="n">rorigin</span></div>

<div class="viewcode-block" id="PolarAxes.get_rorigin"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_rorigin">[docs]</a>    <span class="k">def</span> <span class="nf">get_rorigin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span><span class="o">.</span><span class="n">y0</span></div>

    <span class="k">def</span> <span class="nf">get_rsign</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span><span class="o">.</span><span class="n">y1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_originViewLim</span><span class="o">.</span><span class="n">y0</span><span class="p">)</span>

<div class="viewcode-block" id="PolarAxes.set_rlim"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_rlim">[docs]</a>    <span class="nd">@_api</span><span class="o">.</span><span class="n">make_keyword_only</span><span class="p">(</span><span class="s2">&quot;3.6&quot;</span><span class="p">,</span> <span class="s2">&quot;emit&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_rlim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the radial axis view limits.</span>

<span class="sd">        This function behaves like `.Axes.set_ylim`, but additionally supports</span>
<span class="sd">        *rmin* and *rmax* as aliases for *bottom* and *top*.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        .Axes.set_ylim</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s1">&#39;rmin&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bottom</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">bottom</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;rmin&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Cannot supply both positional &quot;bottom&quot;&#39;</span>
                                 <span class="s1">&#39;argument and kwarg &quot;rmin&quot;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;rmax&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">top</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">top</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;rmax&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Cannot supply both positional &quot;top&quot;&#39;</span>
                                 <span class="s1">&#39;argument and kwarg &quot;rmax&quot;&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="n">top</span><span class="p">,</span> <span class="n">emit</span><span class="o">=</span><span class="n">emit</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="n">auto</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.get_rlabel_position"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_rlabel_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_rlabel_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            The theta position of the radius labels in degrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_r_label_position</span><span class="o">.</span><span class="n">get_matrix</span><span class="p">()[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span></div>

<div class="viewcode-block" id="PolarAxes.set_rlabel_position"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_rlabel_position">[docs]</a>    <span class="k">def</span> <span class="nf">set_rlabel_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the theta position of the radius labels.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : number</span>
<span class="sd">            The angular position of the radius labels in degrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_r_label_position</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.set_yscale"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_yscale">[docs]</a>    <span class="k">def</span> <span class="nf">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">RadialLocator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_locator</span><span class="p">(),</span> <span class="bp">self</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">set_rscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Axes</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_rticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Axes</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="PolarAxes.set_thetagrids"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_thetagrids">[docs]</a>    <span class="k">def</span> <span class="nf">set_thetagrids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angles</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the theta gridlines in a polar plot.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        angles : tuple with floats, degrees</span>
<span class="sd">            The angles of the theta gridlines.</span>

<span class="sd">        labels : tuple with strings or None</span>
<span class="sd">            The labels to use at each theta gridline. The</span>
<span class="sd">            `.projections.polar.ThetaFormatter` will be used if None.</span>

<span class="sd">        fmt : str or None</span>
<span class="sd">            Format string used in `matplotlib.ticker.FormatStrFormatter`.</span>
<span class="sd">            For example &#39;%f&#39;. Note that the angle that is used is in</span>
<span class="sd">            radians.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        lines : list of `.lines.Line2D`</span>
<span class="sd">            The theta gridlines.</span>

<span class="sd">        labels : list of `.text.Text`</span>
<span class="sd">            The tick labels.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kwargs</span>
<span class="sd">            *kwargs* are optional `.Text` properties for the labels.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        .PolarAxes.set_rgrids</span>
<span class="sd">        .Axis.get_gridlines</span>
<span class="sd">        .Axis.get_ticklabels</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Make sure we take into account unitized data</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_yunits</span><span class="p">(</span><span class="n">angles</span><span class="p">)</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">angles</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">fmt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">():</span>
            <span class="n">t</span><span class="o">.</span><span class="n">_internal_update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklines</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">()</span></div>

<div class="viewcode-block" id="PolarAxes.set_rgrids"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.set_rgrids">[docs]</a>    <span class="k">def</span> <span class="nf">set_rgrids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radii</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the radial gridlines on a polar plot.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        radii : tuple with floats</span>
<span class="sd">            The radii for the radial gridlines</span>

<span class="sd">        labels : tuple with strings or None</span>
<span class="sd">            The labels to use at each radial gridline. The</span>
<span class="sd">            `matplotlib.ticker.ScalarFormatter` will be used if None.</span>

<span class="sd">        angle : float</span>
<span class="sd">            The angular position of the radius labels in degrees.</span>

<span class="sd">        fmt : str or None</span>
<span class="sd">            Format string used in `matplotlib.ticker.FormatStrFormatter`.</span>
<span class="sd">            For example &#39;%f&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        lines : list of `.lines.Line2D`</span>
<span class="sd">            The radial gridlines.</span>

<span class="sd">        labels : list of `.text.Text`</span>
<span class="sd">            The tick labels.</span>

<span class="sd">        Other Parameters</span>
<span class="sd">        ----------------</span>
<span class="sd">        **kwargs</span>
<span class="sd">            *kwargs* are optional `.Text` properties for the labels.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        .PolarAxes.set_thetagrids</span>
<span class="sd">        .Axis.get_gridlines</span>
<span class="sd">        .Axis.get_ticklabels</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure we take into account unitized data</span>
        <span class="n">radii</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_xunits</span><span class="p">(</span><span class="n">radii</span><span class="p">)</span>
        <span class="n">radii</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">radii</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">radii</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">fmt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mticker</span><span class="o">.</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">angle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rlabel_position</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_rlabel_position</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">():</span>
            <span class="n">t</span><span class="o">.</span><span class="n">_internal_update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_gridlines</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklabels</span><span class="p">()</span></div>

<div class="viewcode-block" id="PolarAxes.format_coord"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.format_coord">[docs]</a>    <span class="k">def</span> <span class="nf">format_coord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="c1"># docstring inherited</span>
        <span class="n">screen_xy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="n">theta</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>
        <span class="n">screen_xys</span> <span class="o">=</span> <span class="n">screen_xy</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
        <span class="n">ts</span><span class="p">,</span> <span class="n">rs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">screen_xys</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
        <span class="n">delta_t</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">((</span><span class="n">ts</span> <span class="o">-</span> <span class="n">theta</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">delta_t_halfturns</span> <span class="o">=</span> <span class="n">delta_t</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">delta_t_degrees</span> <span class="o">=</span> <span class="n">delta_t_halfturns</span> <span class="o">*</span> <span class="mi">180</span>
        <span class="n">delta_r</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">rs</span> <span class="o">-</span> <span class="n">r</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">theta</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">theta_halfturns</span> <span class="o">=</span> <span class="n">theta</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">theta_degrees</span> <span class="o">=</span> <span class="n">theta_halfturns</span> <span class="o">*</span> <span class="mi">180</span>

        <span class="c1"># See ScalarFormatter.format_data_short.  For r, use #g-formatting</span>
        <span class="c1"># (as for linear axes), but for theta, use f-formatting as scientific</span>
        <span class="c1"># notation doesn&#39;t make sense and the trailing dot is ugly.</span>
        <span class="k">def</span> <span class="nf">format_sig</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">opt</span><span class="p">,</span> <span class="n">fmt</span><span class="p">):</span>
            <span class="c1"># For &quot;f&quot;, only count digits after decimal point.</span>
            <span class="n">prec</span> <span class="o">=</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">delta</span><span class="p">)))</span> <span class="k">if</span> <span class="n">fmt</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span> <span class="k">else</span>
                    <span class="n">cbook</span><span class="o">.</span><span class="n">_g_sig_digits</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="p">))</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">-</span><span class="si">{</span><span class="n">opt</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">prec</span><span class="si">}{</span><span class="n">fmt</span><span class="si">}}</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\N{GREEK SMALL LETTER THETA}</span><span class="s1">=</span><span class="si">{}</span><span class="se">\N{GREEK SMALL LETTER PI}</span><span class="s1"> &#39;</span>
                <span class="s1">&#39;(</span><span class="si">{}</span><span class="se">\N{DEGREE SIGN}</span><span class="s1">), r=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">format_sig</span><span class="p">(</span><span class="n">theta_halfturns</span><span class="p">,</span> <span class="n">delta_t_halfturns</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
                    <span class="n">format_sig</span><span class="p">(</span><span class="n">theta_degrees</span><span class="p">,</span> <span class="n">delta_t_degrees</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">),</span>
                    <span class="n">format_sig</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">delta_r</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">),</span>
                <span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.get_data_ratio"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.get_data_ratio">[docs]</a>    <span class="k">def</span> <span class="nf">get_data_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the aspect ratio of the data itself.  For a polar plot,</span>
<span class="sd">        this should always be 1.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mf">1.0</span></div>

    <span class="c1"># # # Interactive panning</span>

<div class="viewcode-block" id="PolarAxes.can_zoom"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.can_zoom">[docs]</a>    <span class="k">def</span> <span class="nf">can_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether this axes supports the zoom box button functionality.</span>

<span class="sd">        Polar axes do not support zoom boxes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="PolarAxes.can_pan"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.can_pan">[docs]</a>    <span class="k">def</span> <span class="nf">can_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return whether this axes supports the pan/zoom button functionality.</span>

<span class="sd">        For polar axes, this is slightly misleading. Both panning and</span>
<span class="sd">        zooming are performed by the same button. Panning is performed</span>
<span class="sd">        in azimuth while zooming is done along the radial.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="PolarAxes.start_pan"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.start_pan">[docs]</a>    <span class="k">def</span> <span class="nf">start_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rlabel_position</span><span class="p">())</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">epsilon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">45.0</span>
            <span class="n">t</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">angle</span> <span class="o">-</span> <span class="n">epsilon</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="n">angle</span> <span class="o">+</span> <span class="n">epsilon</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;drag_r_labels&#39;</span>
        <span class="k">elif</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;zoom&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">SimpleNamespace</span><span class="p">(</span>
            <span class="n">rmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rmax</span><span class="p">(),</span>
            <span class="n">trans</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">trans_inverse</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">frozen</span><span class="p">(),</span>
            <span class="n">r_label_angle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_rlabel_position</span><span class="p">(),</span>
            <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
            <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolarAxes.end_pan"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.end_pan">[docs]</a>    <span class="k">def</span> <span class="nf">end_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span></div>

<div class="viewcode-block" id="PolarAxes.drag_pan"><a class="viewcode-back" href="../../../_autosummary/smpl.plot.PolarAxes.html#smpl.plot.PolarAxes.drag_pan">[docs]</a>    <span class="k">def</span> <span class="nf">drag_pan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pan_start</span>

        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;drag_r_labels&#39;</span><span class="p">:</span>
            <span class="p">(</span><span class="n">startt</span><span class="p">,</span> <span class="n">startr</span><span class="p">),</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="p">[(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)])</span>

            <span class="c1"># Deal with theta</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">startt</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_rlabel_position</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">r_label_angle</span> <span class="o">-</span> <span class="n">dt</span><span class="p">)</span>

            <span class="n">trans</span><span class="p">,</span> <span class="n">vert1</span><span class="p">,</span> <span class="n">horiz1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_text1_transform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="n">trans</span><span class="p">,</span> <span class="n">vert2</span><span class="p">,</span> <span class="n">horiz2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_yaxis_text2_transform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">majorTicks</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">minorTicks</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_va</span><span class="p">(</span><span class="n">vert1</span><span class="p">)</span>
                <span class="n">t</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">set_ha</span><span class="p">(</span><span class="n">horiz1</span><span class="p">)</span>
                <span class="n">t</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_va</span><span class="p">(</span><span class="n">vert2</span><span class="p">)</span>
                <span class="n">t</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">set_ha</span><span class="p">(</span><span class="n">horiz2</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">p</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;zoom&#39;</span><span class="p">:</span>
            <span class="p">(</span><span class="n">startt</span><span class="p">,</span> <span class="n">startr</span><span class="p">),</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">trans_inverse</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="p">[(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)])</span>

            <span class="c1"># Deal with r</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">r</span> <span class="o">/</span> <span class="n">startr</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_rmax</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">rmax</span> <span class="o">/</span> <span class="n">scale</span><span class="p">)</span></div></div>


<span class="c1"># To keep things all self-contained, we can put aliases to the Polar classes</span>
<span class="c1"># defined above. This isn&#39;t strictly necessary, but it makes some of the</span>
<span class="c1"># code more readable, and provides a backwards compatible Polar API. In</span>
<span class="c1"># particular, this is used by the :doc:`/gallery/specialty_plots/radar_chart`</span>
<span class="c1"># example to override PolarTransform on a PolarAxes subclass, so make sure that</span>
<span class="c1"># that example is unaffected before changing this.</span>
<span class="n">PolarAxes</span><span class="o">.</span><span class="n">PolarTransform</span> <span class="o">=</span> <span class="n">PolarTransform</span>
<span class="n">PolarAxes</span><span class="o">.</span><span class="n">PolarAffine</span> <span class="o">=</span> <span class="n">PolarAffine</span>
<span class="n">PolarAxes</span><span class="o">.</span><span class="n">InvertedPolarTransform</span> <span class="o">=</span> <span class="n">InvertedPolarTransform</span>
<span class="n">PolarAxes</span><span class="o">.</span><span class="n">ThetaFormatter</span> <span class="o">=</span> <span class="n">ThetaFormatter</span>
<span class="n">PolarAxes</span><span class="o">.</span><span class="n">RadialLocator</span> <span class="o">=</span> <span class="n">RadialLocator</span>
<span class="n">PolarAxes</span><span class="o">.</span><span class="n">ThetaLocator</span> <span class="o">=</span> <span class="n">ThetaLocator</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Alexander Puck Neuwirth.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>